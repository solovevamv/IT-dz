{"ast":null,"code":"var _jsxFileName = \"/Users/antontintul/WebstormProjects/burkov-dz/src/Form/index.js\",\n    _s = $RefreshSig$();\n\nimport './index.css';\nimport { Input } from \"../Input\";\nimport { useState } from \"react\";\nimport { Select } from \"../Select\";\nimport { Button } from \"../Button\";\nimport { StatusBlock } from \"../StatusBlock\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Form = props => {\n  _s();\n\n  const {\n    list,\n    setList,\n    options,\n    type,\n    action\n  } = props;\n  let defaultName = '';\n  let defaultSelectedManager = '';\n  let defaultReason = '';\n  let id = -1;\n\n  if (action === 'change') {\n    let searchParams = new URLSearchParams(window.location.search);\n    id = parseInt(searchParams.get('id'));\n    defaultName = list[id].firstName;\n    defaultSelectedManager = list[id].managerId;\n    defaultReason = list[id].description;\n  }\n\n  const [name, setName] = useState(defaultName);\n  const [selectedManager, setSelectedManager] = useState(defaultSelectedManager);\n  const [reason, setReason] = useState(defaultReason);\n  const [formStatus, setFormStatus] = useState('');\n\n  const onChangeSelect = event => {\n    setSelectedManager(event.target.value);\n  };\n\n  const onChangeReason = event => {\n    setReason(event.target.value);\n  };\n\n  const onChangeName = event => {\n    setName(event.target.value);\n  };\n\n  const onSubmitForm = event => {\n    event.preventDefault();\n\n    if (type === \"clients\") {\n      if (!name || !selectedManager || !reason) {\n        setFormStatus('alert');\n        return;\n      }\n    } else {\n      if (!name) {\n        setFormStatus('alert');\n        return;\n      }\n    }\n\n    const array = list.map(value => {\n      return value;\n    });\n\n    if (action === 'change') {\n      array.map((value, index) => {\n        if (id !== -1 && index === id) {\n          value.firstName = name;\n          value.managerId = Number(selectedManager);\n          value.description = reason;\n        }\n      });\n    } else {\n      array.push({\n        managerId: Number(selectedManager),\n        firstName: name,\n        description: reason\n      });\n    }\n\n    setList(array);\n    setFormStatus('success');\n    setName('');\n    setSelectedManager('');\n    setReason('');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: onSubmitForm,\n    children: [/*#__PURE__*/_jsxDEV(StatusBlock, {\n      type: formStatus\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      title: \"Имя\",\n      value: name,\n      onChange: onChangeName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this), type === 'clients' && /*#__PURE__*/_jsxDEV(Input, {\n      value: reason,\n      title: \"Причина звонка\",\n      onChange: onChangeReason\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }, this), type === 'clients' && /*#__PURE__*/_jsxDEV(Select, {\n      title: \"\\u041C\\u0435\\u043D\\u0435\\u0434\\u0436\\u0435\\u0440 \\u0434\\u043B\\u044F \\u043E\\u0431\\u0437\\u0432\\u043E\\u043D\\u0430\",\n      value: selectedManager,\n      options: options.map(value => {\n        return value.firstName;\n      }),\n      placeholder: \"Выбери имя\",\n      onChange: onChangeSelect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      className: 'Form-Submit',\n      submit: true,\n      type: \"action\",\n      children: action === 'change' ? 'Изменить' : 'Добавить'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Form, \"5MZZp+onX+ZqIXCi6+WrsUKRp68=\");\n\n_c = Form;\n\nvar _c;\n\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"sources":["/Users/antontintul/WebstormProjects/burkov-dz/src/Form/index.js"],"names":["Input","useState","Select","Button","StatusBlock","Form","props","list","setList","options","type","action","defaultName","defaultSelectedManager","defaultReason","id","searchParams","URLSearchParams","window","location","search","parseInt","get","firstName","managerId","description","name","setName","selectedManager","setSelectedManager","reason","setReason","formStatus","setFormStatus","onChangeSelect","event","target","value","onChangeReason","onChangeName","onSubmitForm","preventDefault","array","map","index","Number","push"],"mappings":"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","sourcesContent":["import './index.css';\nimport {Input} from \"../Input\";\nimport {useState} from \"react\";\nimport {Select} from \"../Select\";\nimport {Button} from \"../Button\";\nimport {StatusBlock} from \"../StatusBlock\";\n\nexport const Form = (props) => {\n    const {\n        list,\n        setList,\n        options,\n        type,\n        action\n    } = props;\n    let defaultName = '';\n    let defaultSelectedManager = '';\n    let defaultReason = '';\n    let id = -1;\n    if (action === 'change') {\n        let searchParams = new URLSearchParams(window.location.search);\n        id = parseInt(searchParams.get('id'));\n        defaultName = list[id].firstName;\n        defaultSelectedManager = list[id].managerId;\n        defaultReason = list[id].description;\n    }\n\n    const [name, setName] = useState(defaultName);\n    const [selectedManager, setSelectedManager] = useState(defaultSelectedManager);\n    const [reason, setReason] = useState(defaultReason);\n    const [formStatus, setFormStatus] = useState('');\n\n\n    const onChangeSelect = (event) => {\n        setSelectedManager(event.target.value);\n    };\n\n    const onChangeReason = (event) => {\n        setReason(event.target.value);\n    };\n\n    const onChangeName = (event) => {\n        setName(event.target.value);\n    }\n\n    const onSubmitForm = (event) => {\n        event.preventDefault();\n        if (type === \"clients\") {\n            if (!name || !selectedManager || !reason) {\n                setFormStatus('alert');\n                return;\n            }\n        } else {\n            if (!name) {\n                setFormStatus('alert');\n                return;\n            }\n        }\n        const array = list.map((value) => {\n            return value;\n        });\n\n        if (action === 'change') {\n            array.map((value, index) => {\n                if (id !== -1 && index === id) {\n                    value.firstName = name;\n                    value.managerId = Number(selectedManager);\n                    value.description = reason\n                }\n            })\n        } else {\n            array.push({\n                managerId: Number(selectedManager),\n                firstName: name,\n                description: reason,\n            });\n        }\n\n        setList(array);\n        setFormStatus('success');\n        setName('');\n        setSelectedManager('');\n        setReason('');\n    };\n\n    return (\n        <form onSubmit={onSubmitForm}>\n            <StatusBlock type={formStatus} />\n            <Input\n                title={\"Имя\"}\n                value={name}\n                onChange={onChangeName}\n            />\n            { type === 'clients' && (\n                <Input\n                    value={reason}\n                    title={\"Причина звонка\"}\n                    onChange={onChangeReason}\n                />\n            )}\n            { type === 'clients' && (\n                <Select\n                    title=\"Менеджер для обзвона\"\n                    value={selectedManager}\n                    options={options.map((value) => {\n                        return value.firstName;\n                    })}\n                    placeholder={\"Выбери имя\"}\n                    onChange={onChangeSelect}\n                />\n            )}\n            <Button className={'Form-Submit'} submit={true} type=\"action\">{(action === 'change') ? 'Изменить' : 'Добавить'}</Button>\n        </form>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}